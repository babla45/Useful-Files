javascript:(function(){let s=document.getElementById("split-view");if(s){s.replaceWith(s.leftPanel);return;}let chat=document.querySelector("main > div");if(!chat)chat=document.querySelector("main");let wrapper=document.createElement("div");wrapper.id="split-view";wrapper.style.display="flex";wrapper.style.height="100vh";wrapper.style.width="100%";wrapper.style.overflow="hidden";wrapper.style.margin="0";wrapper.style.padding="0";wrapper.style.position="absolute";wrapper.style.top="0";wrapper.style.left="0";let settingsBtn=document.createElement("button");settingsBtn.textContent="⚙%EF%B8%8F";settingsBtn.style.position="absolute";settingsBtn.style.top="10px";settingsBtn.style.right="10px";settingsBtn.style.zIndex="1000";settingsBtn.style.background="#f0f0f0";settingsBtn.style.border="1px solid #ccc";settingsBtn.style.borderRadius="4px";settingsBtn.style.padding="5px 10px";settingsBtn.style.cursor="pointer";let settingsPanel=document.createElement("div");settingsPanel.style.position="absolute";settingsPanel.style.top="45px";settingsPanel.style.right="10px";settingsPanel.style.width="250px";settingsPanel.style.padding="15px";settingsPanel.style.backgroundColor="#ffffff";settingsPanel.style.border="2px solid #0066cc";settingsPanel.style.borderRadius="6px";settingsPanel.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)";settingsPanel.style.zIndex="10000";settingsPanel.style.display="none";settingsPanel.style.color="#000000";settingsPanel.style.fontFamily="Arial, sans-serif";let header=document.createElement("div");header.innerHTML="<div style='font-size:16px; font-weight:bold; margin-bottom:15px; color:#0066cc'>Split Screen Settings</div>";settingsPanel.appendChild(header);let closeBtn=document.createElement("button");closeBtn.textContent="✕";closeBtn.style.position="absolute";closeBtn.style.top="10px";closeBtn.style.right="10px";closeBtn.style.background="none";closeBtn.style.border="none";closeBtn.style.fontSize="16px";closeBtn.style.fontWeight="bold";closeBtn.style.cursor="pointer";closeBtn.style.color="#666";closeBtn.onclick=function(){settingsPanel.style.display="none";};settingsPanel.appendChild(closeBtn);let counterSection=document.createElement("div");counterSection.style.marginBottom="10px";let storedValue=localStorage.getItem("gptSplitScreen_count")||"2";let currentValue=document.createElement("div");currentValue.textContent=storedValue;currentValue.style.fontSize="28px";currentValue.style.fontWeight="bold";currentValue.style.textAlign="center";currentValue.style.padding="10px 0";currentValue.style.margin="10px 0";currentValue.style.backgroundColor="#e6f2ff";currentValue.style.border="1px solid #99ccff";currentValue.style.borderRadius="4px";currentValue.style.color="#0066cc";let label=document.createElement("div");label.textContent="Number of splits (1-10):";label.style.fontSize="14px";label.style.fontWeight="bold";label.style.marginBottom="10px";let slider=document.createElement("input");slider.type="range";slider.min="1";slider.max="10";slider.value=storedValue;slider.style.width="100%";slider.style.height="20px";slider.style.margin="5px 0 15px 0";slider.style.appearance="none";slider.style.webkitAppearance="none";slider.style.background="#ddd";slider.style.outline="none";slider.style.borderRadius="10px";slider.style.opacity="0.9";let controlsContainer=document.createElement("div");controlsContainer.style.display="flex";controlsContainer.style.alignItems="center";controlsContainer.style.justifyContent="space-between";controlsContainer.style.margin="10px 0";let decrementBtn=document.createElement("button");decrementBtn.textContent="−";decrementBtn.style.width="40px";decrementBtn.style.height="40px";decrementBtn.style.fontSize="24px";decrementBtn.style.fontWeight="bold";decrementBtn.style.lineHeight="1";decrementBtn.style.backgroundColor="#f0f0f0";decrementBtn.style.border="1px solid #ccc";decrementBtn.style.borderRadius="4px";decrementBtn.style.cursor="pointer";decrementBtn.style.display="flex";decrementBtn.style.alignItems="center";decrementBtn.style.justifyContent="center";decrementBtn.style.color="#0066cc";let incrementBtn=document.createElement("button");incrementBtn.textContent="+";incrementBtn.style.width="40px";incrementBtn.style.height="40px";incrementBtn.style.fontSize="24px";incrementBtn.style.fontWeight="bold";incrementBtn.style.lineHeight="1";incrementBtn.style.backgroundColor="#f0f0f0";incrementBtn.style.border="1px solid #ccc";incrementBtn.style.borderRadius="4px";incrementBtn.style.cursor="pointer";incrementBtn.style.display="flex";incrementBtn.style.alignItems="center";incrementBtn.style.justifyContent="center";incrementBtn.style.color="#0066cc";currentValue.style.flex="1";currentValue.style.margin="0 10px";decrementBtn.onclick=function(){let newValue=Math.max(1,parseInt(slider.value)-1);slider.value=newValue;currentValue.textContent=newValue;localStorage.setItem("gptSplitScreen_count",newValue);updateSplitLayout(newValue);};incrementBtn.onclick=function(){let newValue=Math.min(10,parseInt(slider.value)+1);slider.value=newValue;currentValue.textContent=newValue;localStorage.setItem("gptSplitScreen_count",newValue);updateSplitLayout(newValue);};controlsContainer.appendChild(decrementBtn);controlsContainer.appendChild(currentValue);controlsContainer.appendChild(incrementBtn);counterSection.appendChild(label);counterSection.appendChild(controlsContainer);counterSection.appendChild(slider);settingsPanel.appendChild(counterSection);slider.oninput=function(){currentValue.textContent=this.value;localStorage.setItem("gptSplitScreen_count",this.value);updateSplitLayout(parseInt(this.value));};wrapper.appendChild(settingsBtn);wrapper.appendChild(settingsPanel);settingsBtn.onclick=function(){settingsPanel.style.display=settingsPanel.style.display==="none"?"block":"none";};let panels=[];let dividers=[];function updateSplitLayout(splitCount){wrapper.innerHTML="";panels=[];dividers=[];wrapper.appendChild(settingsBtn);wrapper.appendChild(settingsPanel);let firstPanel=document.createElement("div");firstPanel.style.flex="1";firstPanel.style.overflowY="auto";firstPanel.style.margin="0";firstPanel.style.padding="0";firstPanel.appendChild(chat);panels.push(firstPanel);wrapper.appendChild(firstPanel);wrapper.leftPanel=chat;for(let i=1;i<splitCount;i++){let divider=document.createElement("div");divider.style.width="6px";divider.style.cursor="col-resize";divider.style.background="#ddd";divider.style.flexShrink="0";dividers.push(divider);wrapper.appendChild(divider);let panel=document.createElement("div");panel.style.flex="1";panel.style.overflowY="auto";panel.style.display="flex";panel.style.flexDirection="column";panel.style.alignItems="stretch";panel.style.margin="0";panel.style.padding="0";panels.push(panel);wrapper.appendChild(panel);updatePanelContent(panel);}setupDividers();updateAllPanels();}function updatePanelContent(panel){let clone=chat.cloneNode(true);clone.style.height="auto";clone.style.minHeight="0";clone.style.background="inherit";clone.style.color="inherit";clone.style.margin="0";clone.style.padding="0";clone.style.width="100%";panel.innerHTML="";panel.appendChild(clone);}let lastScrollHeights=[];let lastScrollPositions=[];let isAtBottoms=[];function updateAllPanels(){for(let i=1;i<panels.length;i++){const panel=panels[i];isAtBottoms[i]=(panel.scrollTop+panel.clientHeight>=panel.scrollHeight-20);lastScrollPositions[i]=panel.scrollTop;lastScrollHeights[i]=panel.scrollHeight;updatePanelContent(panel);(function(idx){requestAnimationFrame(function(){const panel=panels[idx];if(isAtBottoms[idx]||(panels[0].scrollTop+panels[0].clientHeight>=panels[0].scrollHeight-50)){panel.scrollTop=panel.scrollHeight-panel.clientHeight;}else if(lastScrollHeights[idx]>0){const heightDiff=panel.scrollHeight-lastScrollHeights[idx];if(heightDiff>0&&heightDiff<200){panel.scrollTop=lastScrollPositions[idx]+heightDiff;}else{panel.scrollTop=lastScrollPositions[idx];}}});})(i);}}function setupDividers(){dividers.forEach((divider,index)=>{divider.onmousedown=function(e){e.preventDefault();const leftPanel=panels[index];const rightPanel=panels[index+1];document.onmousemove=function(ev){const totalWidth=wrapper.clientWidth;const newPosition=ev.clientX;const leftPercent=(newPosition/totalWidth)*100;if(leftPercent>10&&leftPercent<90){const flexBasis=totalWidth*leftPercent/100;leftPanel.style.flex=%600 0 ${flexBasis}px%60;rightPanel.style.flex="1";}};document.onmouseup=function(){document.onmousemove=null;document.onmouseup=null;};};});}let initialSplitCount=parseInt(localStorage.getItem("gptSplitScreen_count")||"2");updateSplitLayout(initialSplitCount);document.body.appendChild(wrapper);let observer=new MutationObserver(updateAllPanels);observer.observe(chat,{childList:true,subtree:true});})();
